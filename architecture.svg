<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <!-- Define styles -->
  <defs>
    <style>
      .box { fill: #4A90E2; stroke: #2E5C8A; stroke-width: 2; }
      .processor { fill: #50C878; stroke: #2E7D4E; stroke-width: 2; }
      .storage { fill: #F5A623; stroke: #D68910; stroke-width: 2; }
      .output { fill: #9B59B6; stroke: #6C3483; stroke-width: 2; }
      .text { fill: white; font-family: Arial, sans-serif; font-size: 14px; text-anchor: middle; }
      .small-text { fill: white; font-family: Arial, sans-serif; font-size: 11px; text-anchor: middle; }
      .line { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
  </defs>

  <!-- Email Sources -->
  <rect class="box" x="250" y="10" width="300" height="50" rx="5"/>
  <text class="text" x="400" y="40">Email Sources (POP3/IMAP)</text>

  <!-- Main Fetcher -->
  <rect class="box" x="300" y="90" width="200" height="50" rx="5"/>
  <text class="text" x="400" y="115">popit3.py</text>
  <text class="small-text" x="400" y="130">Email Fetcher</text>

  <!-- Router -->
  <rect class="box" x="300" y="170" width="200" height="50" rx="5"/>
  <text class="text" x="400" y="195">process_emails.py</text>
  <text class="small-text" x="400" y="210">Email Router</text>

  <!-- Processors -->
  <rect class="processor" x="50" y="260" width="180" height="60" rx="5"/>
  <text class="text" x="140" y="285">Job Analyser</text>
  <text class="small-text" x="140" y="305">JobServe Processing</text>

  <rect class="processor" x="310" y="260" width="180" height="60" rx="5"/>
  <text class="text" x="400" y="285">Gym Booking</text>
  <text class="small-text" x="400" y="305">David Lloyd Parser</text>

  <rect class="processor" x="570" y="260" width="180" height="60" rx="5"/>
  <text class="text" x="660" y="285">Spam Filter</text>
  <text class="small-text" x="660" y="305">Delete Handler</text>

  <!-- Storage/Processing -->
  <rect class="storage" x="50" y="360" width="180" height="50" rx="5"/>
  <text class="text" x="140" y="385">OpenAI Scoring</text>
  <text class="small-text" x="140" y="400">GPT-4o-mini</text>

  <rect class="storage" x="310" y="360" width="180" height="50" rx="5"/>
  <text class="text" x="400" y="385">Calendar DB</text>
  <text class="small-text" x="400" y="400">Class Bookings</text>

  <!-- Database -->
  <rect class="storage" x="50" y="440" width="180" height="50" rx="5"/>
  <text class="text" x="140" y="465">GDBM Database</text>
  <text class="small-text" x="140" y="480">Job Storage</text>

  <!-- Output -->
  <rect class="output" x="50" y="520" width="180" height="50" rx="5"/>
  <text class="text" x="140" y="545">HTML Reports</text>
  <text class="small-text" x="140" y="560">WebDAV Deploy</text>

  <!-- Connections -->
  <path class="line" d="M 400 60 L 400 90"/>
  <path class="line" d="M 400 140 L 400 170"/>
  
  <!-- Router to Processors -->
  <path class="line" d="M 350 220 L 140 260"/>
  <path class="line" d="M 400 220 L 400 260"/>
  <path class="line" d="M 450 220 L 660 260"/>
  
  <!-- Job Analyser flow -->
  <path class="line" d="M 140 320 L 140 360"/>
  <path class="line" d="M 140 410 L 140 440"/>
  <path class="line" d="M 140 490 L 140 520"/>
  
  <!-- Gym booking flow -->
  <path class="line" d="M 400 320 L 400 360"/>
  <path class="line" d="M 400 410 L 400 440"/>
  
  <!-- Gym HTML output -->
  <rect class="output" x="310" y="440" width="180" height="50" rx="5"/>
  <text class="text" x="400" y="465">HTML Schedule</text>
  <text class="small-text" x="400" y="480">WebDAV Deploy</text>

  <!-- Labels for routing -->
  <text x="240" y="245" font-size="11" fill="#666">john.js@</text>
  <text x="400" y="245" font-size="11" fill="#666">john.dl@</text>
  <text x="560" y="245" font-size="11" fill="#666">spam@</text>
</svg>
